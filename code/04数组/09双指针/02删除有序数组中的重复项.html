<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // 暴力解法
        function removeDuplicates(nums) {
            for (let i = 0; i < nums.length; i++) {
                if (nums[i] === nums[i + 1]) {
                    for (let j = i + 1; j < nums.length; j++) {
                        nums[j - 1] = nums[j];
                    }
                    i--;
                    nums.length--;
                }
            }
            console.log(nums);
            return nums.length;
        }
        console.log(removeDuplicates([1, 1, 2]));

        // 双指针
        function removeDuplicatesV2(nums) {
            let slowIndex = 0;
            for (let fastIndex = 1; fastIndex < nums.length; fastIndex++) {
                console.log("✅ ~ nums[fastIndex]:", nums[fastIndex])

                if (nums[fastIndex] !== nums[slowIndex]) {
                    // 修复：先移动slowIndex，再赋值
                    nums[++slowIndex] = nums[fastIndex];
                }
            }
            console.log('处理后的数组:', nums.slice(0, slowIndex + 1));
            return slowIndex + 1;
        }

        // 详细步骤演示版本
        function removeDuplicatesV3(nums) {
            console.log('=== 详细步骤演示 ===');
            console.log('输入数组:', [...nums]);

            let slowIndex = 0;
            for (let fastIndex = 1; fastIndex < nums.length; fastIndex++) {
                console.log(`步骤${fastIndex}: 比较 nums[${fastIndex}]=${nums[fastIndex]} 与 nums[${slowIndex}]=${nums[slowIndex]}`);

                if (nums[fastIndex] !== nums[slowIndex]) {
                    slowIndex++;
                    nums[slowIndex] = nums[fastIndex];
                    console.log(`  → 不同！移动到位置${slowIndex}，数组变为: [${nums.slice(0, slowIndex + 1).join(', ')}]`);
                } else {
                    console.log(`  → 相同，跳过`);
                }
            }

            console.log('最终去重数组:', nums.slice(0, slowIndex + 1));
            console.log('去重后长度:', slowIndex + 1);
            return slowIndex + 1;
        }
        console.log('修复前的问题版本:');
        console.log(removeDuplicatesV2([1, 1, 2]));

        console.log('\n修复后的详细版本:');
        console.log(removeDuplicatesV3([1, 1, 2]));

        console.log('\n测试更复杂的例子:');
        console.log(removeDuplicatesV3([0, 0, 1, 1, 1, 2, 2, 3, 3, 4]));
    </script>
</body>

</html>