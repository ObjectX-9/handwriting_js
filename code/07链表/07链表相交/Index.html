<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script src="../00å®ç°å•é“¾è¡¨ç»“æ„/index.js"></script>
    <script>

        function getListLength(head) {
            let length = 0
            let cur = head
            while (cur) {
                length++
                cur = cur.next
            }
            return length
        }

        function getIntersectionNode(headA, headB) {
            let curA = headA
            let curB = headB
            // è®¡ç®—é“¾è¡¨é•¿åº¦
            let lenA = getListLength(headA)
            let lenB = getListLength(headB)

            if (lenA < lenB) {
                [curA, curB] = [curB, curA];
                [lenA, lenB] = [lenB, lenA];
            }
            // æ±‚é•¿åº¦å·®
            let gap = lenA - lenB
            // è®©curAå’ŒcurBåœ¨åŒä¸€èµ·ç‚¹ä¸Šï¼ˆæœ«å°¾ä½ç½®å¯¹é½ï¼‰
            while (gap-- > 0) {
                curA = curA.next
            }

            // éå†curAå’ŒcurBï¼Œé‡åˆ°ç›¸åŒåˆ™è¿”å›
            while (curA && curA !== curB) {
                curA = curA.next
                curB = curB.next
            }

            return curA
        }

        console.log("\nğŸ’¡ === åˆ›å»ºçœŸæ­£ç›¸äº¤çš„é“¾è¡¨ ===");
        // åˆ›å»ºçœŸæ­£ç›¸äº¤çš„é“¾è¡¨
        const listA = new LinkedList();
        const listB = new LinkedList();

        // é“¾è¡¨A: 4 -> 1 -> å…±äº«éƒ¨åˆ†
        const node4 = new Node(4);
        const node1 = new Node(1);
        const sharedNode8 = new Node(8);  // å…±äº«èŠ‚ç‚¹
        const sharedNode4 = new Node(4);  // å…±äº«èŠ‚ç‚¹
        const sharedNode5 = new Node(5);  // å…±äº«èŠ‚ç‚¹

        // æ„å»ºé“¾è¡¨A
        node4.next = node1;
        node1.next = sharedNode8;
        sharedNode8.next = sharedNode4;
        sharedNode4.next = sharedNode5;

        // é“¾è¡¨B: 5 -> 0 -> 1 -> å…±äº«éƒ¨åˆ†
        const nodeB5 = new Node(5);
        const nodeB0 = new Node(0);
        const nodeB1 = new Node(1);

        // æ„å»ºé“¾è¡¨Bï¼Œè®©å®ƒæŒ‡å‘ç›¸åŒçš„å…±äº«èŠ‚ç‚¹
        nodeB5.next = nodeB0;
        nodeB0.next = nodeB1;
        nodeB1.next = sharedNode8; // æŒ‡å‘åŒä¸€ä¸ªå…±äº«èŠ‚ç‚¹

        console.log("ğŸ”— çœŸæ­£ç›¸äº¤çš„é“¾è¡¨æµ‹è¯•:");
        const realIntersection = getIntersectionNode(node4, nodeB5);
        console.log("âœ… ~ çœŸæ­£çš„ç›¸äº¤èŠ‚ç‚¹:", realIntersection);
        console.log("âœ… ~ ç›¸äº¤èŠ‚ç‚¹å€¼:", realIntersection ? realIntersection.elem : "null");

    </script>
</body>

</html>