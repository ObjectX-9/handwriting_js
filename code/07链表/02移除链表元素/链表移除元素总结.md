# 链表移除元素的实现方法总结

## 问题描述

给定一个链表和一个目标值，删除链表中所有值等于目标值的节点，并返回新的头节点。

## 解决方案

### 方法一：带虚拟头节点（推荐）

```javascript
function removeElem(root, val) {
  // 创建虚拟头节点，简化边界处理
  const dummyHead = new Node(0, root);
  let pre = dummyHead;
  let cur = pre.next;

  while (cur) {
    if (cur.elem === val) {
      // 删除当前节点
      pre.next = cur.next;
      cur = cur.next;
    } else {
      // 继续遍历
      pre = cur;
      cur = cur.next;
    }
  }

  return dummyHead.next;
}
```

**优点：**

- 逻辑统一，无需单独处理头节点
- 代码简洁，不容易出错
- 虚拟头节点简化了边界条件

### 方法二：不带虚拟头节点

```javascript
function removeElemNoHead(root, val) {
  // 第一步：处理头节点，删除所有连续的匹配头节点
  while (root && root.elem === val) {
    root = root.next;
  }

  // 第二步：处理剩余节点
  let pre = null;
  let current = root;

  while (current) {
    if (current.elem === val && pre) {
      // 删除当前节点
      pre.next = current.next;
    } else {
      // 不删除，pre指针前移
      pre = current;
    }
    current = current.next;
  }

  return root;
}
```

**特点：**

- 需要分两步处理：先处理头节点，再处理其他节点
- 逻辑相对复杂，需要小心处理边界条件

## 核心思路

### 双指针技术

- **pre 指针**：指向要删除节点的前一个节点
- **cur 指针**：指向当前检查的节点
- **删除操作**：`pre.next = cur.next`

### 关键步骤

1. **初始化指针**：设置前驱指针和当前指针
2. **遍历链表**：检查每个节点的值
3. **删除节点**：调整指针连接关系
4. **移动指针**：继续遍历下一个节点

## 测试用例

```javascript
// 测试用例1：普通情况
输入：[1, 2, 6, 3, 4, 5, 6]，删除值：6
输出：[1, 2, 3, 4, 5]

// 测试用例2：连续头节点删除
输入：[6, 6, 6, 1, 2, 3, 6]，删除值：6
输出：[1, 2, 3]

// 测试用例3：全部删除
输入：[6, 6, 6]，删除值：6
输出：[]

// 测试用例4：不存在目标值
输入：[1, 2, 3, 4, 5]，删除值：6
输出：[1, 2, 3, 4, 5]
```

## 常见错误分析

### 错误 1：指针初始化问题

```javascript
// 错误写法
let pre = root;
let cur = pre; // pre和cur指向同一个节点

// 正确写法
let pre = dummyHead;
let cur = pre.next;
```

### 错误 2：空指针访问

```javascript
// 错误写法
if (cur.elem === val) // cur可能为null

// 正确写法
if (cur && cur.elem === val)
```

### 错误 3：头节点处理不当

- 不使用虚拟头节点时，需要单独处理头节点删除情况
- 忘记处理连续多个头节点需要删除的情况

## 时间复杂度和空间复杂度

- **时间复杂度**：O(n)，需要遍历整个链表
- **空间复杂度**：O(1)，只使用了常数个额外变量

## 总结

1. **推荐使用虚拟头节点方法**，代码更简洁，逻辑更统一
2. **双指针是链表操作的经典技巧**，掌握好 prev 和 curr 的配合使用
3. **注意边界条件**，特别是头节点、空链表、全删除等情况
4. **测试要全面**，包含各种边界情况和特殊情况

这道题是链表操作的基础题目，掌握好这个模式对后续的链表问题很有帮助。
