<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        class HttpRequest {
            constructor() {
                this.xhr = new XMLHttpRequest();
            }

            makeRequest(method, url, data = null) {
                return new Promise((resolve, reject) => {
                    this.xhr.open(method, url, true);
                    this.xhr.setRequestHeader("Content-Type", "application/json");

                    this.xhr.onload = () => {
                        if (this.xhr.status >= 200 && this.xhr.status < 300) {
                            resolve(this.xhr.responseText);
                        } else {
                            reject(new Error(`Request failed with status ${this.xhr.status}`));
                        }
                    };

                    this.xhr.onerror = () => {
                        reject(new Error("Request failed"));
                    };

                    if (data) {
                        this.xhr.send(JSON.stringify(data));
                    } else {
                        this.xhr.send();
                    }
                });
            }

            get(url) {
                return this.makeRequest("GET", url);
            }

            post(url, data) {
                return this.makeRequest("POST", url, data);
            }

            put(url, data) {
                return this.makeRequest("PUT", url, data);
            }

            patch(url, data) {
                return this.makeRequest("PATCH", url, data);
            }
        }

        const http = new HttpRequest();

        // GET请求示例
        http
            .get("https://jsonplaceholder.typicode.com/posts/1")
            .then((response) => {
                console.log("GET Response:", JSON.parse(response));
            })
            .catch((error) => {
                console.error("GET Error:", error);
            });

        // POST请求示例
        const postData = { title: "foo", body: "bar", userId: 1 };
        http
            .post("https://jsonplaceholder.typicode.com/posts", postData)
            .then((response) => {
                console.log("POST Response:", JSON.parse(response));
            })
            .catch((error) => {
                console.error("POST Error:", error);
            });

        // PUT请求示例
        const putData = { id: 1, title: "foo", body: "bar", userId: 1 };
        http
            .put("https://jsonplaceholder.typicode.com/posts/1", putData)
            .then((response) => {
                console.log("PUT Response:", JSON.parse(response));
            })
            .catch((error) => {
                console.error("PUT Error:", error);
            });

        // PATCH请求示例
        const patchData = { title: "foo" };
        http
            .patch("https://jsonplaceholder.typicode.com/posts/1", patchData)
            .then((response) => {
                console.log("PATCH Response:", JSON.parse(response));
            })
            .catch((error) => {
                console.error("PATCH Error:", error);
            });

    </script>
</body>

</html>