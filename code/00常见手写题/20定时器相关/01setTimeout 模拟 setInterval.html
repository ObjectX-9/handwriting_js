<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        function mySetInterval(fn, t) {
            let timerId = null;

            function interval() {
                fn();
                timerId = setTimeout(interval, t); // é€’å½’è°ƒç”¨
            }

            // é¦–æ¬¡è°ƒç”¨ï¼Œå…ˆæ‰§è¡Œä¸€æ¬¡ï¼Œç„¶åé€’å½’è°ƒç”¨
            timerId = setTimeout(interval, 0);
            return {
                cancel: () => {
                    if (timerId) {
                        clearTimeout(timerId);
                        timerId = null;
                    }
                }
            };
        }

        // æµ‹è¯•
        console.log('ğŸ• å¼€å§‹æ—¶é—´:', new Date().toLocaleTimeString());

        const a = mySetInterval(() => {
            console.log('ğŸ•', new Date().toLocaleTimeString(), '111')
        }, 1000);
        const b = mySetInterval(() => {
            console.log('ğŸ•', new Date().toLocaleTimeString(), '222')
        }, 1000);

        setTimeout(() => {
            console.log('ğŸ›‘ å–æ¶ˆæ—¶é—´:', new Date().toLocaleTimeString());
            a.cancel();
            b.cancel();
            console.log('âœ… å®šæ—¶å™¨å·²å–æ¶ˆ');
        }, 5000)

    </script>
</body>

</html>